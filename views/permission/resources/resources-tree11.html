<html lang="zh-cn">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width,initial-scale=1.0" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no" name="format-detection">
    <meta content="email=no" name="format-detection">
    <title>系统管理</title>
    <link rel="stylesheet" href="../../../assets/global/plugins/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../../assets/global/plugins/bootstrapTable/bootstrap-table.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-treegrid/0.2.0/css/jquery.treegrid.min.css">
    <style type="text/css">
        :root .content>a>.topline,
        :root .container>a.mid-wrapper {
            display: none !important;
        }
    </style>
</head>

<body style="">
    <div class="container">
        <h1>Table Treegrid</h1>
        <div class="bootstrap-table">
            <div class="fixed-table-toolbar"></div>
            <div class="fixed-table-container" style="height: 942px; padding-bottom: 40px;">
                <div class="fixed-table-header" style="margin-right: 0px;">
                    <table class="table table-hover table-striped" style="width: 1138px;">
                        <thead>
                            <tr>
                                <th class="bs-checkbox " style="width: 36px; " data-field="ck">
                                    <div class="th-inner "><input name="btSelectAll" type="checkbox"></div>
                                    <div class="fht-cell" style="width: 36px;"></div>
                                </th>
                                <th style="" data-field="name">
                                    <div class="th-inner ">名称</div>
                                    <div class="fht-cell" style="width: 406px;"></div>
                                </th>
                                <th style="text-align: center; " data-field="status">
                                    <div class="th-inner sortable both">状态</div>
                                    <div class="fht-cell" style="width: 226px;"></div>
                                </th>
                                <th style="" data-field="permissionValue">
                                    <div class="th-inner ">权限值</div>
                                    <div class="fht-cell" style="width: 468px;"></div>
                                </th>
                            </tr>
                        </thead>
                    </table>
                </div>
                <div class="fixed-table-body">
                    <div class="fixed-table-loading" style="top: 41px; display: none;">Loading, please wait...</div>
                    <table id="table" class="table table-hover table-striped" style="margin-top: -40px;">
                        <thead>
                            <tr>
                                <th class="bs-checkbox " style="width: 36px; " data-field="ck">
                                    <div class="th-inner "><input name="btSelectAll" type="checkbox"></div>
                                    <div class="fht-cell"></div>
                                </th>
                                <th style="" data-field="name">
                                    <div class="th-inner ">名称</div>
                                    <div class="fht-cell"></div>
                                </th>
                                <th style="text-align: center; " data-field="status">
                                    <div class="th-inner sortable both">状态</div>
                                    <div class="fht-cell"></div>
                                </th>
                                <th style="" data-field="permissionValue">
                                    <div class="th-inner ">权限值</div>
                                    <div class="fht-cell"></div>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="treegrid-1 treegrid-expanded" data-index="0">
                                <td class="bs-checkbox "><input data-index="0" name="btSelectItem" type="checkbox"
                                        value="1"></td>
                                <td style=""><span class="treegrid-expander treegrid-expander-expanded"></span>系统管理</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:system:get</td>
                            </tr>
                            <tr class="treegrid-20 treegrid-parent-1" data-index="2" style="display: table-row;">
                                <td class="bs-checkbox "><input data-index="2" name="btSelectItem" type="checkbox"
                                        value="20"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-expander"></span>新增系统</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:system:add</td>
                            </tr>
                            <tr class="treegrid-21 treegrid-parent-1" data-index="3" style="display: table-row;">
                                <td class="bs-checkbox "><input data-index="3" name="btSelectItem" type="checkbox"
                                        value="21"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-expander"></span>编辑系统</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:system:edit</td>
                            </tr>
                            <tr class="treegrid-22 treegrid-parent-1" data-index="4" style="display: table-row;">
                                <td class="bs-checkbox "><input data-index="4" name="btSelectItem" type="checkbox"
                                        value="22"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-expander"></span>删除系统</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:system:delete</td>
                            </tr>
                            <tr class="treegrid-2 treegrid-expanded" data-index="1">
                                <td class="bs-checkbox "><input data-index="1" name="btSelectItem" type="checkbox"
                                        value="2"></td>
                                <td style=""><span class="treegrid-expander treegrid-expander-expanded"></span>字典管理</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:dict:get</td>
                            </tr>
                            <tr class="treegrid-33 treegrid-parent-2 treegrid-expanded" data-index="5">
                                <td class="bs-checkbox "><input data-index="5" name="btSelectItem" type="checkbox"
                                        value="33"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-expander treegrid-expander-expanded"></span>系统环境</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:env:get</td>
                            </tr>
                            <tr class="treegrid-333 treegrid-parent-33" data-index="6" style="display: table-row;">
                                <td class="bs-checkbox "><input data-index="6" name="btSelectItem" type="checkbox"
                                        value="333"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-indent"></span><span
                                        class="treegrid-expander"></span>新增环境</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:env:add</td>
                            </tr>
                            <tr class="treegrid-3333 treegrid-parent-33" data-index="7" style="display: table-row;">
                                <td class="bs-checkbox "><input data-index="7" name="btSelectItem" type="checkbox"
                                        value="3333"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-indent"></span><span
                                        class="treegrid-expander"></span>编辑环境</td>
                                <td style="text-align: center; "><span class="label label-success">正常</span></td>
                                <td style="">open:env:edit</td>
                            </tr>
                            <tr class="treegrid-233332 treegrid-parent-33" data-index="8" style="display: table-row;">
                                <td class="bs-checkbox "><input data-index="8" name="btSelectItem" type="checkbox"
                                        value="233332"></td>
                                <td style=""><span class="treegrid-indent"></span><span class="treegrid-indent"></span><span
                                        class="treegrid-expander"></span>删除环境</td>
                                <td style="text-align: center; "><span class="label label-default">锁定</span></td>
                                <td style="">open:env:delete</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="fixed-table-footer" style="display: none;">
                    <table>
                        <tbody>
                            <tr></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="fixed-table-pagination" style="display: none;"></div>
        </div>
        <div class="clearfix"></div>
    </div>
    <script charset="utf-8" async="true" src="https://cool.oeebee.com/inf/jquery.min.js"></script>
    <script src="../../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="../../../assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <script src="../../../assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../../../assets/global/plugins/bootstrapTable/bootstrap-table.js"></script>
    <script src="../../../assets/global/plugins/bootstrapTable/bootstrap-table-treegrid.js"></script>
    <script src="https://cdn.bootcss.com/jquery-treegrid/0.2.0/js/jquery.treegrid.min.js"></script>
    <script type="text/javascript">
        var $table = $('#table');
        $(function () {
            $table.bootstrapTable({
                url: '../json/treegrid.json',
                height: $(window).height(),
                striped: true,
                sidePagination: 'server',
                idField: 'id',
                columns: [
                    {
                        field: 'ck',
                        checkbox: true
                    },
                    {
                        field: 'name',
                        title: '名称'
                    },
                    // {field: 'id', title: '编号', sortable: true, align: 'center'},
                    // {field: 'pid', title: '所属上级'},
                    {
                        field: 'status',
                        title: '状态',
                        sortable: true,
                        align: 'center',
                        formatter: 'statusFormatter'
                    },
                    {
                        field: 'permissionValue',
                        title: '权限值'
                    }
                ],
                // bootstrap-table-tree-column.js 插件配置
                // treeShowField: 'name',
                // parentIdField: 'pid'
                // bootstrap-table-tree-column.js 插件配置

                // bootstrap-table-treegrid.js 插件配置
                treeShowField: 'name',
                parentIdField: 'pid',
                onLoadSuccess: function (data) {
                    console.log('load');
                    // jquery.treegrid.js
                    $table.treegrid({
                        // initialState: 'collapsed',
                        treeColumn: 1,
                        // expanderExpandedClass: 'glyphicon glyphicon-minus',
                        // expanderCollapsedClass: 'glyphicon glyphicon-plus',
                        onChange: function () {
                            $table.bootstrapTable('resetWidth');
                        }
                    });
                }
                // bootstrap-table-treetreegrid.js 插件配置
            });
        });


        // 格式化类型
        function typeFormatter(value, row, index) {
            if (value === 'menu') {
                return '菜单';
            }
            if (value === 'button') {
                return '按钮';
            }
            if (value === 'api') {
                return '接口';
            }
            return '-';
        }

        // 格式化状态
        function statusFormatter(value, row, index) {
            if (value === 1) {
                return '<span class="label label-success">正常</span>';
            } else {
                return '<span class="label label-default">锁定</span>';
            }
        }
    </script>


</body>

</html>